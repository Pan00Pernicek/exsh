#!/usr/bin/env execlineb
foreground {
forstdin -x 1 exsh_cmd
importas exsh_cmd exsh_cmd

backtick if { pipeline { echo $exsh_cmd } cut -d " " -f1 }
importas if if
ifthenelse { test $if = setvar } {
	backtick var { pipeline { echo $exsh_cmd } cut -d " " -f2 }
	backtick cont { pipeline { echo $exsh_cmd } cut -d " " -f3 }
	importas var var importas cont cont
	redirfd -a 1 /tmp/exsh echo define $var $cont
} { ifthenelse { test $if = reset } {
	rm /tmp/exsh
} {
ifthenelse { test -f /tmp/exsh } { true } { touch /tmp/exsh }
backtick env { cat /tmp/exsh }
importas -s env env
$env
foreground { execlineb -c $exsh_cmd } } 
importas home HOME

ifthenelse { test -f ${home}/.exshrc } { 
	backtick env { cat ${home}/.exshrc }
	importas env env
	execlineb -c $env
} { printf "\033[38;2;0;255;127mâ†’ \033[0;0m" } } }
